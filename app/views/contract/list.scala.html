@(contracts: List[Contract], filterForm: Form[ContractFilter])

@import helper._

@main("Contracts", "Contracts", "contracts") {

	<!--table class="contract_list"-->
	<!--table class="sortable"-->
	<table class="contracts" id="contracts">
		<thead>
		<tr>
			<th class="contract_id">Contract</td>
			<th>Name</th>
			<!--th class="contract_name">Name</th-->
			<th class="inner_display_column cost {'sorter':'cost'}">MRC</th>
			<th class="inner_display_column cost {'sorter':'cost'}">NRC</th>
			<th class="inner_display_column location_code">Locations</th>
			<th class="inner_display_column days_to_cancellation">Days to cancel</th>
			<th class="inner_display_column billing-account">Billing Account</th>
			<th class="attention"></th>
			<th class="inner_display_column links {sorter: false}"></th>
		</tr>
	</thead>
	<tbody>

		@contracts.map { contract =>
				@defining(contract.status.name) { status => 

				<tr class="@status">
				<td class="contract_id">@Company.findById(contract.companyId).get.name @contract.vendorContractId</td>
				<td class="inner_display_column">@contract.name</td>
				<td class="inner_display_column">@contract.mrc<br/>@Currency.stringById(contract.currencyId)</td>
				<td class="inner_display_column">@contract.nrc<br/>@Currency.stringById(contract.currencyId)</td>
				<td class="inner_display_column">@contract.aEnd.code<br/>@contract.zEnd.code</td>
				<td class="inner_display_column days-to-cancel">
					@if(contract.status != CANCELLED) { 
					@contract.daysUntilCancellationDate 
					} 
				</td>
				<td class="inner_display_column billing-account">@contract.billingAccount</td>
				<td class="attention">@if(contract.attention!=None){
					<a class="attention" href="#">!<span>@contract.attention</span></a>
					}else{}</td>
				<td class="inner_display_column contract-links"> 
					<a href="@routes.Contracts.view(contract.id.get)">View</a>
					<a href="@routes.Contracts.edit(contract.id.get)">Edit</a>
					<!--a onClick="return confirmDelete()" href="@routes.Contracts.delete(contract.id.get)">Delete</a-->
				</td>
			</tr>
			}
		}
	</tbody>
	</table>

	<p>

	@filter_form(filterForm)

	<p>

	<a href="@routes.Contracts.create">Add a new contract</a>

	<script type="text/javascript">
		$.tablesorter.addParser({
			id: 'cost',
			is: function(s) { return false; },
			format: function(s) { 
				return(s.replace(/[A-z]+/, ""));
			},
			type: 'numeric'
		});
		$(function() {
      $("#contracts").tablesorter()({
				headers: {
					3: { sorter: 'cost' },
					4: { sorter: 'cost' }
				}
			});
		});
			
		$(document).ready(function() { 
        $("#contracts").tablesorter();
		});
	</script>

}
